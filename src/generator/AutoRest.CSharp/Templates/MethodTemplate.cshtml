@using System.Globalization
@using System.Linq;
@using System
@using AutoRest.Core.ClientModel
@using AutoRest.Core.Utilities
@using AutoRest.CSharp
@using AutoRest.CSharp.TemplateModels
@inherits AutoRest.Core.Template<AutoRest.CSharp.TemplateModels.MethodTemplateModel>

public @(Model.TaskExtensionReturnTypeString) @(Model.Name)(@(Model.GetAsyncMethodParameterDeclaration(true)))
{
    @Model.BuildInputMappings()
    var _url =  _uriBuilder.BuildUri() + "/" + "@(Model.Url.TrimStart('/'))";
    @(Model.BuildUrl("_url"))

@if (Model.RequestBody != null)
{
if (Model.ReturnType.Body != null)
{
    @:return _client.@(Model.HttpMethod.ToString())<@(Model.RequestBody.Type), @(Model.ReturnType.Body.Name)>(_url, @(Model.RequestBody.Name));
}
else
{
    @:return _client.@(Model.HttpMethod.ToString())(_url, @(Model.RequestBody.Name));
}
}
else
{
if (Model.ReturnType.Body != null)
{
    @:return _client.@(Model.HttpMethod.ToString())<@(Model.ReturnType.Body.Name)>(_url);
}
else
{
    @:return _client.@(Model.HttpMethod.ToString())(_url);
}
}
}
